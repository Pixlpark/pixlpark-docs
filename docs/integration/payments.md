# Интеграции с платежными системами

## Сбербанк

* Настройка платежной системы "__Сбербанк__" позволяет оплачивать заказы на сайте при помощи [эквайринга Сбербанка](https://www.sberbank.ru/ru/s_m_business/bankingservice/acquiring_total).

* Для настройки платежной системы необходимо выполнить следующие действия.

### Получение доступа к тестовой среде
* Для получения доступа необходимо перейти на [страницу](https://www.sberbank.ru/ru/s_m_business/bankingservice/acquiring_total) и оставить заявку на эквайринг нажав на кнопку "__Оставить заявку__".
![](../_media/integration/sber_01.png ':size=70%')
* После заполнения анкеты Сбербанк отправит письмо о регистрации в тестовой среде, содержащее:
    + __логин-operator__ и __пароль__ к нему (для [личного кабинета](https://securepayments.sberbank.ru/mportal3));
    + __логин-api__ и __пароль__ к нему (для указания в панели управления Pixlpark).

### Требования к оформлению сайта
* Для подключения платежной системы необходимо привести сайт в соответствии с [требованиями](https://securepayments.sberbank.ru/wiki/doku.php/merchant_website_guidelines), а также разместить информацию о:
    + политике конфиденциальности;
    > Политика конфиденциальности объясняет пользователям ресурса (сайт / мобильное приложение), с какой целью их личная информация собирается, и как будет использоваться. Политика конфиденциальности ресурса должна предоставлять пользователям следующие гарантии:
    > - неразглашение персональных данных и их безопасность;
    > - использование сведений, предоставленных пользователем, исключительно с целью связи с ним, в том числе для направления электронных уведомлений.
    > Основное условие политики конфиденциальности ресурса – максимальная прозрачность. После ее прочтения пользователь должен получить полное представление о том, с какой целью от него требуется предоставление личных данных, как они хранятся, обрабатываются, каким образом защищены и т. д.
    + пользовательском соглашении;
    > Это соглашение пользователей ресурса с одной стороны и ресурсом (сайтом / мобильным приложением) с другой стороны, в котором прописаны ряд условий между сторонами. Пользовательское соглашение регламентирует отношения между пользователями и ресурсом. Пользовательское соглашение определяет юридическую, правовую сторону деятельности в Интернете. Это публичная оферта, присоединяясь к которой посетитель ресурса получает права и обязанности, определенные владельцем ресурса.
    + описании процесса передачи данных.
    > На странице выбора оплаты необходимо разместить следующий текст:</br>
    "Для оплаты (ввода реквизитов Вашей карты) Вы будете перенаправлены на платежный шлюз ПАО СБЕРБАНК. Соединение с платежным шлюзом и передача информации осуществляется в защищенном режиме с использованием протокола шифрования SSL. В случае если Ваш банк поддерживает технологию безопасного проведения интернет-платежей Verified By Visa или MasterCard SecureCode для проведения платежа также может потребоваться ввод специального пароля. Настоящий сайт поддерживает 256-битное шифрование. Конфиденциальность сообщаемой персональной информации обеспечивается ПАО СБЕРБАНК. Введенная информация не будет предоставлена третьим лицам за исключением случаев, предусмотренных законодательством РФ. Проведение платежей по банковским картам осуществляется в строгом соответствии с требованиями платежных систем МИР, Visa Int. и MasterCard Europe Sprl."

### Настройка тестового режима оплаты заказов
* Для настройки тестового режима оплаты заказов в панели управления Pixlpark необходимо  перейти в раздел "__Настройка / Оплата__" и в подразделе "__Способы оплаты__" перейти в [карточку оплаты](https://docs.pixlpark.ru/#/site/payments) "__Сбербанк__".
> В случае, если при переходе в подраздел "__Способы оплаты__"  в списке отсутствует "__Сбербанк__", необходимо выбрать значение "__Не учитывать__" в подразделе "__Доступность__".
* ![](../_media/integration/sber_02.png ':size=70%')
* В подразделе "__Основная информация__" заполнить поля, указав:
    + __Название на сайте__;
    + __Название в панели управления__;
    + __Признак способа расчета в электронном чеке__ - выбрать необходимый способ из списка;
    + __Доступность на сайте__ - необходимо включить;
    + __Доступность в мобильном приложении__ - включить при необходимости;
    + __Платежная система используется по умолчанию__ - включить при необходимости.
* ![](../_media/integration/sber_03.png ':size=70%')
> Подраздел "__Ограничения__" при необходимости настраивается опционально.
* ![](../_media/integration/restriction.png ':size=70%')
* В подразделе "__Настройки платежной системы__" заполнить поля, указав:
    + "__Тестовый логин__" - тестовый логин из письма в формате `логин-api`;
    + "__Тестовый пароль__" - пароль для тестового `логин-api` из письма;
    + "__Включить тестовый режим работы__" - необходимо включить.
* ![](../_media/integration/sber_04.png ':size=70%')
* > При использовании версии ФФД 1.05 в настройках эквайринга от Сбербанка включить "Использовать новый формат ФФД 1.05".
* Далее, нажать кнопку "__Сохранить__" и сбросить кэш сайта.
* После, осуществить платеж на сайте выбрав "__Сбербанк__" в качестве способа оплаты заказа. Для осуществления платежа использовать [тестовые карты](https://securepayments.sberbank.ru/wiki/doku.php/test_cards).
* При успешном завершении платежа информация дополнительно будет отражена в подразделе "__Оплата заказа__" [карточки заказа](https://docs.pixlpark.ru/#/orders/edit?id=_7-%d0%9e%d0%bf%d0%bb%d0%b0%d1%82%d0%b0-%d0%b7%d0%b0%d0%ba%d0%b0%d0%b7%d0%b0) в панели управления Pixlpark.
![](../_media/integration/sber-05.png ':size=60%')

### Получение доступа к продукционной (боевой) среде
* Для получения доступа к продукционной  (боевой) среде оплаты заказов необходимо передать информацию в Сбербанк:
    + об успешном совершении тестового платежа;
    + ссылки на страницы оплаты, доставки, реквизитов, контактов, пользовательского соглашения, дополнительно указать о том, что для перехода на страницу оплаты необходимо добавить товар в корзину и оформить заказ;
* После проверки и одобрения информации на почту поступит письмо с данными для настройки продукционной (боевой) среды, содержащее:
    + __логин-operator__ и __пароль__ к нему (для личного кабинета);
    + __логин-api__ и __пароль__ к нему (для настройки в панели управления Pixlpark).
> Полученные для продукционной (боевой) среды пароли необходимо изменить в [личном кабинете эквайринга](https://securepayments.sberbank.ru/mportal3). Подробнее об изменении пароля можно узнать на [странице](https://securepayments.sberbank.ru/wiki/doku.php/checklist).

### Настройка продукционного (боевого) режим оплаты заказов
* Для настройки продукционного (боевого) режима оплаты заказов необходимо перейти в раздел "__Настройка / Оплата__" и в подразделе "__Способы оплаты__" перейти в  "__Сбербанк__".
* В подразделе "__Настройки платежной системы__" заполнить поля, указав:
    + "__Логин__" - указать логин из письма в формате `логин–api`;
    + "__Пароль__" - указать новый пароль, измененный в личном кабинете эквайринга;
    + "__Включить тестовый режим работы__" - необходимо выключить.
* ![](../_media/integration/sber-06.png ':size=70%')
* > При использовании версии ФФД 1.05 в настройках эквайринга от Сбербанка включить "Использовать новый формат ФФД 1.05".
* Далее, нажать кнопку "__Сохранить__" и сбросить кэш сайта.
> В [личном кабинете эквайринга](https://securepayments.sberbank.ru/mportal3) возможно отслеживать заказы, оплаченные через Сбербанк. Для авторизации необходимо использовать логин-оператор и новый пароль к нему.

## Тинькофф

* Настройка платежной системы "__Тинькофф__" позволяет оплачивать заказы на сайте при помощи [эквайринга Тинькофф](https://www.tinkoff.ru/business/payments/internet-acquiring).

* Для настройки платежной системы необходимо выполнить следующие действия.

### Получение доступа
* Для получения доступа необходимо перейти на [страницу](https://www.tinkoff.ru/business/payments/internet-acquiring/) и оставить заявку на эквайринг нажав на кнопку "__Подключить__".
![](../_media/integration/tinkoff_01.png ':size=70%')

### Требования к оформлению сайта
* Для подключения платежной системы необходимо привести сайт в соответствии с [требованиями](https://www.tinkoff.ru/kassa/solution/classic/help/how-work/connection-conditions/#q3).

### Настройка тестового режима оплаты заказов
> Предварительно необходимо [настроить](https://www.tinkoff.ru/kassa/solution/classic/help/how-involve/payment/#q8) тестовый терминал в личном кабинете интернет-эквайринга Тинькофф.
* Для настройки тестового режима оплаты заказов в панели управления Pixlpark необходимо  перейти в раздел "__Настройка / Оплата__" и в подразделе "__Способы оплаты__" перейти в [карточку оплаты](https://docs.pixlpark.ru/#/site/payments) "__Тинькофф__".
> В случае, если при переходе в подраздел "__Способы оплаты__"  в списке отсутствует "__Тинькофф__", необходимо выбрать значение "__Не учитывать__" в подразделе "__Доступность__".
* ![](../_media/integration/sber_02.png ':size=70%')
* В подразделе "__Основная информация__" заполнить поля, указав:
    + __Название на сайте__;
    + __Название в панели управления__;
    + __Признак способа расчета в электронном чеке__ - выбрать необходимый способ из списка;
    + __Доступность на сайте__ - необходимо включить;
    + __Доступность в мобильном приложении__ - включить при необходимости;
    + __Платежная система используется по умолчанию__ - включить при необходимости.
* ![](../_media/integration/tinkoff_02.png ':size=70%')
> Подраздел "__Ограничения__" при необходимости настраивается опционально.
* ![](../_media/integration/restriction.png ':size=70%')
* В подразделе "__Настройки платежной системы__" заполнить поля, указав:
    + "__Terminal ID__" - номер тестового терминала.
* ![](../_media/integration/tinkoff_03.png ':size=70%')
* Далее, нажать кнопку "__Сохранить__" и сбросить кэш сайта.
* После, осуществить платеж на сайте выбрав "__Тинькофф__" в качестве способа оплаты заказа. Для осуществления платежей использовать данные тестовых карт, указанных на странице "__Тестирование платежей__" в личном кабинете Тинькофф.
> Подробную информацию о тестировании можно узнать на [странице](https://www.tinkoff.ru/kassa/solution/classic/help/how-involve/payment/#q10).
* При успешном завершении платежа информация дополнительно будет отражена в подразделе "__Оплата заказа__" [карточки заказа](https://docs.pixlpark.ru/#/orders/edit?id=_7-%d0%9e%d0%bf%d0%bb%d0%b0%d1%82%d0%b0-%d0%b7%d0%b0%d0%ba%d0%b0%d0%b7%d0%b0) в панели управления Pixlpark.
![](../_media/integration/tinkoff_04.png ':size=60%')

### Настройка рабочего режима оплаты заказов
> Для осуществления настроек предварительно необходимо настроить рабочий терминал в личном кабинете Тинькофф, а также убедится в его активации сотрудниками банка.
* Для настройки рабочего режима оплаты заказов необходимо перейти в раздел "__Настройка / Оплата__" и в подразделе "__Способы оплаты__" перейти в "__Тинькофф__".
* В подразделе "__Настройки платежной системы__" заполнить поля, указав:
    + "__Terminal ID__" - номер рабочего терминала.
* ![](../_media/integration/tinkoff_05.png ':size=70%')
* Далее, нажать кнопку "__Сохранить__" и сбросить кэш сайта.

## Robokassa

* Настройка платежной системы "__Robokassa__" позволяет оплачивать заказы на сайте при помощи платежной системы Robokassa.

* Для настройки платежной системы необходимо выполнить следующие действия.

### Получение доступа
* Для получения доступа необходимо перейти на [страницу](https://robokassa.com) и оставить заявку на подключение нажав на кнопку "__Подключиться к Robokassa__".
![](../_media/integration/robokassa-01.png ':size=70%')

### Требования к оформлению сайта
* Для подключения платежной системы необходимо привести сайт в соответствии с [требованиями](https://robokassa.com/content/trebovaniya.html).

### Настройка тестового режима оплаты заказов
> Предварительно необходимо [создать и настроить магазин](https://robokassa.com/content/podklyuchenie-k-cms-ili-crm.html)  в личном кабинете Robokassa. При осуществлении настроек задать параметры:
> - "__Result URL__" - указать адрес в формате `https://ваш-сайт/payment/robokassa/result`;
> - "__Метод отсылки данных по Result Url__" - выбрать метод __POST__;
> - "__Success URL__"- указать адрес в формате `https://ваш-сайт/payment/robokassa/success`
> - "__Метод отсылки данных по Success Url__" - выбрать метод __POST__;
> - "__Fail URL__" - указать адрес в формате `https://ваш-сайт/payment/robokassa/fail`
> - "__Метод отсылки данных по Fail Url__" - выбрать метод __GET__.
> - пароли для проведения тестовых платежей.
* Для настройки тестового режима оплаты заказов в панели управления Pixlpark необходимо  перейти в раздел "__Настройка / Оплата__" и в подразделе "__Способы оплаты__" перейти в [карточку оплаты](https://docs.pixlpark.ru/#/site/payments) "__Robokassa__".
> В случае, если при переходе в подраздел "__Способы оплаты__"  в списке отсутствует "__Robokassa__", необходимо выбрать значение "__Не учитывать__" в подразделе "__Доступность__".
* ![](../_media/integration/sber_02.png ':size=70%')
* В подразделе "__Основная информация__" заполнить поля, указав:
    + __Название на сайте__;
    + __Название в панели управления__;
    + __Признак способа расчета в электронном чеке__ - выбрать необходимый способ из списка;
    + __Доступность на сайте__ - необходимо включить;
    + __Доступность в мобильном приложении__ - включить при необходимости;
    + __Платежная система используется по умолчанию__ - включить при необходимости.
* ![](../_media/integration/robokassa-02.png ':size=70%')
> Подраздел "__Ограничения__" при необходимости настраивается опционально.
* ![](../_media/integration/restriction.png ':size=70%')
* В подразделе "__Настройки платежной системы__" заполнить поля, указав:
    + "__Идентификатор магазина__" - идентификатор магазина в Robokassa;
    + "__Пароль #1__" - пароль #1 для тестовой среды в Robokassa;
    + "__Пароль #2__" - пароль #2 для тестовой среды в Robokassa;
    + "__Включить тестовый режим работы__" - необходимо включить.
* ![](../_media/integration/robokassa-03.png ':size=70%')
* Далее, нажать кнопку "__Сохранить__" и сбросить кэш сайта.
* После, осуществить платеж на сайте выбрав "__Robokassa__" в качестве способа оплаты заказа.
* При успешном завершении платежа информация дополнительно будет отражена в подразделе "__Оплата заказа__" [карточки заказа](https://docs.pixlpark.ru/#/orders/edit?id=_7-%d0%9e%d0%bf%d0%bb%d0%b0%d1%82%d0%b0-%d0%b7%d0%b0%d0%ba%d0%b0%d0%b7%d0%b0) в панели управления Pixlpark.
![](../_media/integration/robokassa-04.png ':size=60%')

### Настройка рабочего режима оплаты заказов
* Для настройки рабочего режима оплаты заказов необходимо перейти в раздел "__Настройка / Оплата__" и в подразделе "__Способы оплаты__" перейти в "__Robokassa__".
* В подразделе "__Настройки платежной системы__" заполнить поля, указав:
    + "__Пароль #1__" - пароль #1 в Robokassa;
    + "__Пароль #2__" - пароль #2 в Robokassa;
    + "__Включить тестовый режим работы__" - необходимо включить.
* ![](../_media/integration/robokassa-05.png ':size=70%')
* Далее, нажать кнопку "__Сохранить__" и сбросить кэш сайта.
> Для запуска платежной системы необходимо пройти двухэтапную активацию магазина в Robokassa.

## Юkassa
* Данный раздел в текущий момент находится в разработке.
* В ближайшее время мы дополним его всей необходимой информацией.

## Банковский перевод
* Данный раздел в текущий момент находится в разработке.
* В ближайшее время мы дополним его всей необходимой информацией.