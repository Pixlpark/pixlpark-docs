# Интеграции с облачными хранилищами
> Загрузка файлов в облачные хранилища происходит не моментально и может занять некоторое время.

## Яндекс.Диск
* Интеграция с [Яндекс.Диск](https://disk.yandex.ru) позволяет автоматически выгружать заказы в данный облачный сервис.
* Для настройки интеграции необходимо выполнить следующие действия.
* Перейти [на страницу создания приложения](https://oauth.yandex.ru/client/new) и заполнить форму, указав:
    + __Название сервиса__ - название создаваемого приложения.
* ![](../_media/integration/ya08.png ':size=80%')
* Далее, в разделе "__Для какой платформы нужно приложение__" нужно выбрать пункт "__Веб-сервисы__" и заполнить поле "__Callback URI #1__" в формате: `https://ваш-сайт/account/login/yandexdisk?allowAnonymous=true`
![](../_media/integration/ya09.png ':size=80%')
* Затем в подразделе "__Яндекс.Диск REST API__" раздела "__Какие данные вам нужны?__" выбрать пункты:
    + __Доступ к папке приложения на диске__.
    + __Чтение всего диска__.
    + __Запись в любом месте на диске__.
    + __Доступ к информации о диске__.
* ![](../_media/integration/ya10.png ':size=80%')
* Затем, в разделе "__Дополнительно__" заполнить поля, указав:
    + __Ссылка на сайт__ - указать адрес сайта.
* ![](../_media/integration/ya04.png ':size=80%')
* После, в разделе "__Контактные данные__" указать email для связи.
![](../_media/integration/ya05.png ':size=80%')
* Далее, завершить создание приложения нажав кнопку "__Создать приложение__" в нижней части экрана.
* После этого сервис отобразит страницу с ключами созданного приложения.
![](../_media/integration/ya11.png ':size=80%')
* Параллельно необходимо открыть в панели управления Pixlpark раздел "__Заказы / Настройка / Выгрузка заказов__" и в подразделе "__Облачные хранилища__" включить "__Яндекс.Диск__".
* Затем скопировать поля из Яндекса в Pixlpark:
    + "__ClientID__" в "__ClientID__".
    + "__Client secret__" в "__Client secret__".
* ![](../_media/integration/ya12.png ':size=80%')
* Далее нажать кнопку "__Сохранить__" в нижней части экрана и сбросить кэш сайта.
* Затем вручную получить OAuth-токен. Для этого в браузере следует перейти по ссылке с указанием __ClientID__ созданного приложения:
`https://oauth.yandex.ru/authorize?response_type=token&client_id=ID`
* После перехода на страницу нажать кнопку "__Войти как__", выбрав имя_Вашего_профиля.
![](../_media/integration/ya17.png ':size=30%')
* Сервис отобразит страницу с токеном. Токен также будет добавлен в адресную строку страницы в браузере.
![](../_media/integration/ya18.png ':size=80%')
* В панели управления Pixlpark в подразделе "__Облачные хранилища / Яндекс.Диск__" раздела  "__Заказы / Настройка / Выгрузка заказов__" указать:
    + Полученный токен  в "__Access Token__".
    + Адрес для папки, в которой будет хранится выгрузка заказов в "__Путь до заказов на Яндекс.Диск__".
* Далее нажать кнопку "__Сохранить__" и сбросить кэш сайта.
* Итоговая настройка выглядит следующим образом:
![](../_media/integration/ya19.png ':size=80%')

## Облако Mail.ru
* Интеграция с [Облако Mail.ru](https://cloud.mail.ru/) позволяет автоматически выгружать заказы в данный облачный сервис. 
* Для настройки интеграции необходимо выполнить следующие действия:
* Зарегистрировать почту на Облако Mail.ru.
* Параллельно необходимо открыть в панели управления Pixlpark раздел "__Заказы / Настройка / Выгрузка заказов__" и в подразделе "__Облачные хранилища__" включить "__Облако Mail.ru__".
* Затем заполнить поля в Pixlpark, указав:
    + __Email__ - электронная почта на сервисе "Облако Mail.ru".
    + __Password__ - пароль для электронной почты на сервисе "Облако Mail.ru".
    + __Путь до заказов на Облако Mail.ru__ -  пусть папки, созданной для хранения заказов.

![](../_media/integration/mail01.png ':size=70%')
* Затем нажать кнопку "__Сохранить__" и сбросить кэш сайта.

## Google Диск
* Интеграция с [Google Drive](https://drive.google.com) позволяет автоматически выгружать заказы в данный облачный сервис.
* Для настройки интеграции необходимо выполнить следующие действия:
* Открыть в браузере [ссылку](https://console.developers.google.com/cloud-resource-manager) и нажать кнопку "__CREATE PROJECT__".
![](../_media/integration/drive01.png ':size=50%')
* Далее, нужно заполнить форму, указав:
    + __Project name__ - название сайта.
    + __Organization__ - название организации.
    + __Location__ - доменное имя.
* После заполнения полей нужно нажать кнопку "__CREATE__" для создания проекта.
![](../_media/integration/drive02.png ':size=50%')
* Затем в боковой панели навигации перейти в раздел "__APIs & Services / OAuth consent screen__".
![](../_media/integration/drive03.png ':size=30%')
* На открывшейся странице выбрать "__External__" и нажать кнопку "__CREATE__" для создания приложения.
![](../_media/integration/drive04.png ':size=50%')
* Затем необходимо внести следующую информацию:
    + __App name__ - имя приложения.
    + __User support email__ - электронная почта поддержки пользователей.
    + __App logo__ - логотип сайта (при необходимости).
    + __Email addresses__ - адреса электронной почты разработчика.
    + __Email address__ в подразделе "__Developer contact information__" - электронная почта компании.
* Затем нужно сохранить внесенные изменения, нажав кнопку "__SAVE AND CONTINUE__" и закончить создание приложения, пройдя этапы, не требующие обязательного внесения дополнительных данных.
* По завершении будет создано приложение в тестовом режиме без публичного доступа. Для перевода приложения в боевой режим необходимо в разделе "__APIs & Services / OAuth consent screen__" изменить статус приложения "__Publishing status__" на "__PUBLISH APP__".
![](../_media/integration/drive05.png ':size=50%')
* После этого для создания ключей доступа к приложению нужно перейти в раздел "__APIs & Services / Credentials__", нажать кнопку "__+ CREATE CREDENTIALS__" и выбрать подпункт "__OAuth client ID__".
![](../_media/integration/drive06.png ':size=70%')
* На открывшейся странице нужно заполнить поля:
    + __Application type__ - тип приложения (выбрать "__Web application__").
    + __Name__ - название сайта.
    + __Authorized redirect URIs 1__ - адрес страницы `https://ваш-сайт/account/login/google`.
    + __Authorized redirect URIs 2__ - адрес страницы для получения токена `https://developers.google.com/oauthplayground`.
* ![](../_media/integration/drive07.png ':size=50%')
* Затем нажать кнопку "__CREATE__" и создать "__OAuth client ID__", после чего будет отображено окно с ключами доступа.
![](../_media/integration/drive08.png ':size=30%')
* Параллельно необходимо открыть в панели управления Pixlpark раздел "__Заказы / Настройка / Выгрузка заказов__" и в подразделе "__Облачные хранилища__" включить "__Google Диск__".
* Затем нужно скопировать поля из Google в Pixlpark:
    + "__Your Client ID__" в "__App ID__".
    + "__Your Client Secret__" в "__App Secret__".
* ![](../_media/integration/drive09.png ':size=70%') 
* Далее, нажать кнопку "__Сохранить__" и сбросить кэш сайта.
* В разделе "__APIs&Services / Library__" выбрать и установить дополнительное приложение "__Google Drive API__".
![](../_media/integration/drive10.png ':size=50%')
* Затем пройти по [ссылке](https://developers.google.com/oauthplayground/) и настроить конфигурацию при помощи кнопки в правом верхнем углу, указав:
    + __Use your OAuth credentials__.
    + __OAuth Client ID__.
    + __OAuth Client secret__.
* ![](../_media/integration/drive11.png ':size=70%')
* В левой части экрана в разделе "__Step 1__" выбрать пункты списка "__Drive API v3__" и нажать кнопку "__Authorize APIs__".
![](../_media/integration/drive12.png ':size=30%')
* На открывшейся странице выбрать аккаунт, на который зарегистрировано приложение, и предоставить Google права доступа к нему.
* Далее, в "__Step 2__" нажать кнопку "__Exchange authorization code for tokens__".
![](../_media/integration/drive13.png ':size=30%')
* Затем на Google Диске создать папку, в которую будут выгружаться заказы.
* Параллельно необходимо открыть в панели управления Pixlpark раздел "__Настройка / Сервисы__" и в разделе "__Google Диск__" заполнить поля, указав:
    + __App Name__ - название приложения.
    + __Refresh Token__ - полученный "Refresh Token".
    + __Путь до заказа на Google Диск__ - путь папки, созданной для хранения заказов.
* ![](../_media/integration/drive14.png ':size=70%')
* Далее, нажать кнопку "__Сохранить__" и сбросить кэш сайта.

## Dropbox 
* Интеграция с [Dropbox](https://www.dropbox.com) позволяет автоматически выгружать заказы в данный облачный сервис.
* Для настройки интеграции необходимо выполнить следующие действия.
* Перейти [на страницу создания приложения](https://www.dropbox.com/developers) и заполнить поля:
    + __Choose an API__ - выбрать API "__Scoped access__".
    + __Choose the type of access you need__ - выбрать тип доступа "__Full Dropbox__".
    + __Name your app__ - название Вашего приложения.
* ![](../_media/integration/dropbox00.png ':size=50%')
* Затем, нажать "__Create app__" для создания приложения.
* Далее, в подразделе "__Files and folders__" вкладки "__Permissions__" выбрать:
    + __Files.metadata.write__.
    + __Files.content.write__.
    + __Files.content.read__.
* ![](../_media/integration/dropbox00-01.png ':size=50%')
* Для сохранения изменений в нижней части экрана нажать кнопку "__Submit__".
* Затем, в подразделе "__OAuth 2 / Generated access token__"  раздела "__Setting__" создать токен, нажав кнопку "__Generate__".
![](../_media/integration/dropbox01.png ':size=50%')
* После этого сервис отобразит созданный токен. 
![](../_media/integration/dropbox02.png ':size=60%')
* Параллельно необходимо открыть в панели управления Pixlpark раздел "__Заказы / Настройка / Выгрузка заказов__" и в подразделе "__Облачные хранилища__" включить "__Dropbox__".
* Затем нужно скопировать поле из Dropbox в Pixlpark:
    + "__Generated access token__" в "__Access Token__".
* В поле "__Путь до заказов на Dropbox__" указать путь до заказов на сервисе Dropbox.
![](../_media/integration/dropbox03.png ':size=70%')
* Далее нажать кнопку "__Сохранить__" в нижней части экрана и сбросить кэш сайта.