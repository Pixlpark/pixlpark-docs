Вот от сюда все перенести: https://pixlpark.ru/faq/prices/calc

# Установка калькулятора на сайт

## Общая информация
!> В данной документации собрано лишь самое необходимое для адекватного использования калькулятора через скрипты. Использование свойств или методов, которые есть в калькуляторе, но не указаны тут, может кардинально повлиять на его работу. Чаще всего такие свойства или методы помечаются через _ в начале.<br />Используйте их на свой страх и риск.

### О хранении и доступе
* Все калькуляторы на странице хранятся в массиве pxpCalculators. Так, например, если на странице 2 калькулятора, то доступ ко второму будет по индексу 1 (считаем от нуля)
```
// получить массив калькуляторов
pxpCalculators
// получить второй калькулятор в массиве
pxpCalculators[1]
```
* Учитывая, что чаще всего на странице 1 калькулятор, то самым распространненым вариантом вызова будет:
`pxpCalculators[0]`

### PxpCalc
#### Модель калькулятора
##### Основные свойства

<details>
<summary>materialSelector</summary>

| | `MaterialSelectorController` |
|---|---|
| **описание** | Модуль выбора категорий, товаров и атрибутов |
| **пример вызова** | `pxpCalculators[0].materialSelector` |

</details>

<details>
<summary>editorSettingsController</summary>

| | `EditorSettingsController` |
|---|---|
| **описание** | Модуль выбора размеров редактора (только для редактора интерьеров) |
| **пример вызова** | `pxpCalculators[0].editorSettingsController` |

</details>

### О первом запуске
* После того как калькулятор загрузился и первый раз получил данные о категории и товаре, происходит следующее:
    1. Калькулятор ищет на странице метод `onCompleteLoadPxpCalc`.
    1. Если он его находит, то исполняет, передавая первым параметром калькулятор.
* Таким образом, если вам необходимо проделать какие-то операции с калькулятором, то лучше всего это делать именно через этот метод.
```html
// какой-то калькулятор
[$calculator(category:product)$]
 
<script>
    // Метод, который будет вызываться по завершении загрузки калькулятора
    // calc - это калькулятор, который исполнил метод, вы можете получать данные о нем прямо отсюда
    function onCompleteLoadPxpCalc(calc) {
        // ваш код
    }        
</script>
```
### О модификации
* Прежде чем писать скрипт, который будет использовать возможности калькулятора, убедитесь, что:
    1. Данного функционала нет в платформе.
    1. Данный функционал не будет реализован в ближайшее время.
* Также стоит помнить два момента:
    1. Структура и методика работы калькулятора на платформе может обновляться, и нет никакой гарантии, что ваши скрипты будут работать так же, как и раньше.
    1. Если ваш скрипт ломает внутренную логику, то изменять калькулятор для решения этой проблемы не будут.
* По любым вопросам вы всегда можете написать на почту a.malyshkov@pixlpark.com

## Интеграция на сайт

* Самый банальный пример итогового скрипта для интеграции
```html
<div id="container"></div>
<script src="http://demo.pixlpark.ru/api/calc/externalCalc"></script>
<script>
    var container = document.getElementById("container");
    var params = { materialType: "photos" };
    var integrated = new PxpCalcManager(container, params);
</script>
```
* Калькулятор можно интегрировать на внешний сайт. Для этого необходимо сделать следующее:

### Шаг 1
* Cоздать на странице контейнер, в котором позже будет находиться калькулятор.
```html
<div id="integratedCalculator"></div>
```
* В данном случае это простой контейнер `div` с Id `integratedCalculator`. В будущем в нем будет разметка калькулятора.

### Шаг 2
* Дальше через тег `<script>` получим необходимый скрипт для иницилизации калькулятора. Для этого нужно от сайта на платформе Pixlpark сделать следующий вид запроса через API:
```html
<script src="http://demo.pixlpark.ru/api/calc/externalCalc"></script>
```
В `src` скрипта мы имеем:
    1. Домен на платформе [Pixlpark](http://demo.pixlpark.ru), однако у вас должен быть один из тех, что вы указали в разделе настройки доменов.
    1. Путь `/api/calc/externalCalc`, который посылает запрос на сервер для получения скрипта для иницилизации калькулятора.
* У данного API-запроса также могут быть параметры:

<details>
<summary>cssLink</summary>

| cssLink | |
|---|---|
| **описание** | Загружает на страницу css файл по указанной ссылке |
| **по-умолчанию** | common.css |
| **необходимость** | Необязательный параметр |
| **пример использования** | `<script src="http://demo.pixlpark.ru/api/calc/externalCalc?cssLink=/content/css/cssCalc"></script>` |

</details>

<details>
<summary>photolabId</summary>

| photolabId | |
|---|---|
| **описание** | Загружает калькулятор от конкретного сайта по указанному Id |
| **по-умолчанию** | Берется от указанного домена |
| **необходимость** | Необязательный параметр |
| **пример использования** | `<script src="http://demo.pixlpark.ru/api/calc/externalCalc?photolabId=3264"></script>` |

</details>

### Шаг 3
* После того как скрипт загружен, необходимо иницилизировать калькулятор. Чтобы это сделать, необходимо вызвать функцию **PxpCalcManager**. Рассмотрим параметры, которые входят в эту функцию:

* **PxpCalcManager**  
Модель, содержащая в себе методы для иницилизации калькулятора на странице  
**Параметры конструктора*

<details>
<summary>element</summary>

| | HTMLElement |
|---|---|
| **описание** | Контейнер, в который будет заружен калькулятор |

</details>

<details>
<summary>params</summary>

| | ParamsModel |
|---|---|
| **описание** | Набор параметров для настройки иницилизации калькулятора |

</details>

* **ParamsModel**  
Набор параметров для настройки иницилизации калькулятора  
**Поля*

<details>
<summary>materialType</summary>

| | string или number |
|---|---|
| **описание** | Id или UrlName категории (можно найти в настройках категории) |
| **Необходимость** | Обязательный параметр |

</details>


## Категории и товары

## Размеры редактора

## Опции и позиции

## Переменные

## Тиражи

## Ценовая панель
