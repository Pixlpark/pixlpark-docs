# Настройка системы скидок

## Основная информация
* **Стратегия применения скидки** - алгоритм выбора и применения одной или нескольких скидок:
    + **Суммировать абсолютно все скидки** - применять к заказу одновременно все подходящие скидки.
    + **Применять одну максимальную скидку** - применять к заказу только одну скидку, имеющую максимальный размер.
    + **Суммировать все суммирующиеся скидки** - применять к заказу либо одну максимальную скидку, либо одновременно все суммирующиеся (что дает большее значение).
* **Суммировать количество продуктов одной категории** - если в настройках задан разный размер скидки в зависимости от количества продуктов в заказе, то данная опция позволяет суммировать все товары из этой же категории, чтобы размер скидки был максимальным. 
* **Показывать расширенную информацию по скидкам на странице корзины** - данная настройка позволяет на странице корзины выводить название и описание скидки, активированный купон с возможностью его деактивации, сумму всех совершенных заказов, а также последующую персональную скидку в зависимости от объема заказов.
* **Рассчитывать скидки через Mindbox** - включить расчет скидок через внешний маркетинговый сервис Mindbox.
![](../_media/marketing/marketing11.png ':size=50%')

## Скидка для заказчика за репост
* Данная скидка работает следующим образом:
    + На сайте на странице корзины или в личном кабинете в разделе "Мои скидки" выводится блок, состоящий из кнопок социальных сетей "поделиться", поля для ввода адреса поста и кнопки "Получить скидку".
    + При нажатии кнопки "поделиться" идет публикация в соц. сеть той страницы, которая указана в настройках данной скидки в "Ссылка для репоста". Например, это может быть либо главная страница, либо страница акции.
    + Далее, клиент копирует адрес поста соц. сети в соответствующее поле блока этой скидки на странице корзины и нажимает кнопку "Получить скидку".
    + После чего к нему автоматически применяется скидка, выбранная в поле "Купонная скидка". Это достигается за счет генерации и активации одноразового купона, куда в качестве значения передается введенный клиентом адрес поста.
    + После оформления заказа с примененной скидкой за репост сотрудник компании проверяет наличие поста в соц. сети от данного клиента (по полю "значение" у купона). Если посл не находится, то сотрудник вправе отменить данную скидку для заказа.

![](../_media/marketing/marketing12.png ':size=70%')

## Скидка для друга за первый заказ
* Данная скидка работает следующим образом:
    + На сайте в личном кабинете в разделе "Мои скидки" расположена соответствующая секция и кнопка "Поделиться скидкой".
    + При нажатии кнопки в появившемся модальном окне клиенту необходимо указать имя друга, его электронную почту, и нажать кнопку "Поделиться".
    + Далее другу отправляется письмо с купоном от указанной скидки в поле "Купонная скидка". Отметим, что данный купон генерируется автоматически, а его создателем является клиент, пригласивший друга.
    + После того как друг активирует купон из письма и оформит первый заказ, клиенту на личный счет начисляется вознаграждение либо в виде процента от заказа, либо в виде фиксированной суммы. Размер и тип расчета вознаграждения задается в настройках скидки.

![](../_media/marketing/marketing13.png ':size=70%')