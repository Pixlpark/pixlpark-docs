# Настройка системы скидок

## Основная информация
* __Стратегия применения скидки__ - алгоритм выбора и применения одной или нескольких скидок:
    + __Суммировать абсолютно все скидки__ - применять к заказу одновременно все подходящие скидки.
    + __Применять одну максимальную скидку__ - применять к заказу только одну скидку, имеющую максимальный размер.
    + __Суммировать все суммирующиеся скидки__ - применять к заказу либо одну максимальную скидку, либо одновременно все суммирующиеся (что дает большее значение).
* __Суммировать количество продуктов одной категории__ - если в настройках задан разный размер скидки в зависимости от количества продуктов в заказе, то данная опция позволяет суммировать все товары из этой же категории, чтобы размер скидки был максимальным. 
* __Показывать расширенную информацию по скидкам на странице корзины__ - данная настройка позволяет на странице корзины выводить название и описание скидки, активированный купон с возможностью его деактивации, сумму всех совершенных заказов, а также последующую персональную скидку в зависимости от объема заказов.
* __Рассчитывать скидки через Mindbox__ - включить расчет скидок через внешний маркетинговый сервис [Mindbox](https://mindbox.ru/).
![](../_media/marketing/marketing11.png ':size=50%')

## Скидка для заказчика за репост
* Данная скидка работает следующим образом:
    + На сайте на странице корзины или в личном кабинете в разделе "__Мои скидки__" выводится блок, состоящий из кнопок социальных сетей "поделиться", поля для ввода адреса поста и кнопки "__Получить скидку__".
    + При нажатии кнопки "__Поделиться__" идет публикация в соц. сеть той страницы, которая указана в настройках данной скидки в "__Ссылка для репоста__". Например, это может быть либо главная страница, либо страница акции.
    + Далее, клиент копирует адрес поста соц. сети в соответствующее поле блока этой скидки на странице корзины и нажимает кнопку "__Получить скидку__".
    + После чего к нему автоматически применяется скидка, выбранная в поле "__Купонная скидка__". Это достигается за счет генерации и активации одноразового купона, куда в качестве значения передается введенный клиентом адрес поста.
    + После оформления заказа с примененной скидкой за репост сотрудник компании проверяет наличие поста в соц. сети от данного клиента (по полю "значение" у купона). Если посл не находится, то сотрудник вправе отменить данную скидку для заказа.

![](../_media/marketing/marketing12.png ':size=70%')

## Скидка для друга за первый заказ
* Данная скидка работает следующим образом:
    + На сайте в личном кабинете в разделе "__Мои скидки__" расположена соответствующая секция и кнопка "__Поделиться скидкой__".
    + При нажатии кнопки в появившемся модальном окне клиенту необходимо указать имя друга, его электронную почту, и нажать кнопку "__Поделиться__".
    + Далее другу отправляется письмо с купоном от указанной скидки в поле "__Купонная скидка__". Отметим, что данный купон генерируется автоматически, а его создателем является клиент, пригласивший друга.
    + После того как друг активирует купон из письма и оформит первый заказ, клиенту на личный счет начисляется вознаграждение либо в виде процента от заказа, либо в виде фиксированной суммы. Размер и тип расчета вознаграждения задается в настройках скидки.

![](../_media/marketing/marketing13.png ':size=70%')